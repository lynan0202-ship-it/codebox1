// ------------------------------
// 题干：b. 编写一个函数，接受两个 int 类型的参数分别表示上限和下限。该函数从用户的输入中读取整数。
//       如果整数超出规定上下限，函数再次打印菜单（使用 a 部分的函数）提示用户输入，然后获取一个新值。
//       如果用户输入的整数在规定范围内，该函数则把该整数返回主调函数。
//       如果用户输入一个非整数字符，该函数应返回 4。
// 知识要点：
//  1. 函数的参数传递（接收上下限参数 ）
//  2. 输入输出（scanf 的使用，处理用户输入 ）
//  3. 循环控制（输入不合法时重新提示 ）
//  4. 函数的嵌套调用（调用 a 部分的 `show_menu` 函数 ）
// 总体逻辑：
//  1. 定义 `get_choice` 函数，接收上限和下限参数
//  2. 在函数内部，使用循环不断获取用户输入，直到输入合法
//  3. 调用 `show_menu` 函数显示菜单（输入不合法时重新显示 ）
//  4. 处理用户输入，判断是否合法（在上下限内、是否为整数 ），合法则返回，不合法则重新输入或返回 4
#include <stdio.h>
// 包含 a 部分的函数声明（如果是拆分多个文件，实际要正确包含，这里假设在同一文件或已正确处理 ）
void show_menu(); 

// 定义获取用户选择的函数，接收上下限参数
int get_choice(int lower, int upper) {
    int input;
    // 标记输入是否合法
    int valid = 0; 
    while (!valid) {
        // 显示菜单
        show_menu(); 
        // 获取用户输入，%d 期望整数输入
        int ret = scanf("%d", &input); 
        if (ret != 1) { 
            // 如果输入不是整数，返回 4
            return 4; 
        } else if (input < lower || input > upper) { 
            // 输入超出上下限，提示重新输入（这里简单提示，也可更详细 ）
            printf("输入超出范围，请重新输入！\n"); 
        } else {
            // 输入合法，标记为有效，退出循环
            valid = 1; 
        }
    }
    // 返回合法的输入值
    return input; 
}

// 这里复制 a 部分的 `show_menu` 函数实现（实际项目中建议拆分文件并正确包含 ）
void show_menu() {
    printf("Please choose one of the following:\n");
    printf("1) copy files          2) move files\n");
    printf("3) remove files        4) quit\n");
    printf("Enter the number of your choice:\n");
}

int main() {
    // 假设上下限是 1 和 4（对应菜单选项 ）
    int choice = get_choice(1, 4); 
    printf("你选择的是：%d\n", choice);
    return 0;
}

// 测试验证方案：
//  1. 怎么运行：
//     - 保存代码为 menu_b.c
//     - 用 gcc 编译：gcc menu_b.c -o menu_b
//     - 运行：./menu_b（Linux/Mac） 或 menu_b.exe（Windows）
//  2. 预期结果：
//     - 输入合法整数（1 - 4 ），返回该整数并输出
//     - 输入超出范围（如 5 ），重新显示菜单并提示重新输入
//     - 输入非整数（如 a ），返回 4 并输出
//  3. 检查点：
//     - 确认输入超出范围时会重新显示菜单并提示
//     - 确认输入非整数时返回 4
// 易错点提醒：
//  1. 容易忘记处理 `scanf` 的返回值，导致非整数输入时程序行为异常
//  2. 循环控制容易出错，比如忘记更新 `valid` 变量导致死循环
//  3. 要确保 `show_menu` 函数能正确调用，若拆分文件要正确包含头文件或函数声明
// 拓展思考：
//  1. 如果要支持更多的错误处理情况（比如输入负数 ），怎么扩展代码？
//  2. 如何优化输入提示，让用户更清楚知道错误原因（比如区分“超出范围”和“非整数”错误 ） 