

#include <stdio.h>

int main() {
    int n;
    // 循环输入次数，直到输入 0 或负数
    while (1) {  
        printf("请输入计算次数（输入 0 或负数结束）：");
        scanf("%d", &n);

        // 终止条件：输入 0 或负数
        if (n <= 0) {  
            break;
        }

        double sum1 = 0.0, sum2 = 0.0;
        // 遍历次数，计算两个序列的和
        for (int i = 1; i <= n; i++) {  
            // 序列 1：1.0 + 1.0/2.0 + 1.0/3.0 + ... 
            sum1 += 1.0 / i;  
            // 序列 2：1.0 - 1.0/2.0 + 1.0/3.0 - 1.0/4.0 + ... 
            sum2 += (i % 2 == 1 ? 1.0 : -1.0) / i;  

/*
            拆解分析：
i % 2 == 1
i % 2 是取余运算，结果为 1（当 i 是奇数时）或 0（当 i 是偶数时）。
因此，i % 2 == 1 是一个条件判断：i 是奇数吗？
(条件 ? 表达式1 : 表达式2)
这是 C 语言的 三目运算符（条件运算符），等价于简单的 if-else：
如果条件为真（i 是奇数），则返回 表达式1 的值（1.0）。
如果条件为假（i 是偶数），则返回 表达式2 的值（-1.0）。
/ i
将三目运算符的结果（1.0 或 -1.0）除以当前的 i 值。
sum2 += ...
等价于 sum2 = sum2 + ...，将计算结果累加到变量 sum2 中。
实际效果：
当 i 从 1 开始递增时，这句代码会产生以下序列并累加：
i=1（奇数）：sum2 += 1.0 / 1 → 加 1.0
i=2（偶数）：sum2 += -1.0 / 2 → 减 0.5
i=3（奇数）：sum2 += 1.0 / 3 → 加 0.333...
i=4（偶数）：sum2 += -1.0 / 4 → 减 0.25
... 以此类推
最终得到的序列和是：1 - 1/2 + 1/3 - 1/4 + 1/5 - ... ± 1/n，这是一个经典的数学级数，收敛于 自然对数 ln(2)（约 0.6931）。

if (i % 2 == 1) {
    sum2 += 1.0 / i;  // 奇数项加正数
} else {
    sum2 += -1.0 / i; // 偶数项加负数（等价于减）
}

三目运算符（条件运算符）是 C 语言中唯一的三元运算符，语法形式为：
条件表达式 ? 表达式1 : 表达式2
它的作用是根据条件判断结果，选择执行两个表达式中的一个，等价于简化的 if-else 结构。
基本用法示例：
1. 简单的条件判断

#include <stdio.h>

int main() {
    int a = 10, b = 20;
    int max;
    
    // 用三目运算符求两个数的最大值
    max = (a > b) ? a : b;  // 如果a>b为真/1，max=a；否则假/0  max=b
    
    printf("最大值是：%d\n", max);  // 输出：最大值是：20
    return 0;
}
#include <stdio.h>

int main() {
    int a = 10, b = 20;
    int max;
    
    // 用三目运算符求两个数的最大值
    max = (a > b) ? a : b;  // 如果a>b为真，max=a；否则max=b
    
    printf("最大值是：%d\n", max);  // 输出：最大值是：20
    return 0;
}

#include <stdio.h>

int main() {
    int score = 85;
    char grade;
    
    // 嵌套三目运算符：根据分数判断等级
    grade = (score >= 90) ? 'A' : 
            (score >= 80) ? 'B' : 
            (score >= 60) ? 'C' : 'D';
    
    printf("成绩等级：%c\n", grade);  // 输出：成绩等级：B
    return 0;
}

执行逻辑：
先判断 score >= 90？85 不满足，进入 : 后的表达式
再判断 score >= 80？85 满足，返回 'B'
3. 用于输出语句

#include <stdio.h>

int main() {
    int age = 17;
    
    // 直接在printf中使用三目运算符
    printf("是否成年：%s\n", (age >= 18) ? "是" : "否");  // 输出：是否成年：否
    return 0;
}

注意事项：
优先级：三目运算符优先级较低，复杂表达式建议加括号（如上面的示例）。
可读性：嵌套不宜过多（一般不超过 2 层），否则建议用 if-else。
返回值：表达式1 和 表达式2 的类型应兼容（如都是 int 或都是 char）。
适用场景：
简单的条件赋值（如求最值、判断奇偶）
简化的条件输出
作为函数参数传递简单判断结果
通过三目运算符可以让代码更简洁，但需在简洁性和可读性之间平衡。


*/
        }

        printf("序列 1 的和（前 %d 项）：%.4f\n", n, sum1);
        printf("序列 2 的和（前 %d 项）：%.4f\n", n, sum2);
    }

    return 0;
}