// ------------------------------
// 知识要点总结：
//  1. 二维数组的声明与初始化：
//     - 语法：类型 数组名[行数][列数]
//     - 初始化：用嵌套大括号批量赋值，每行对应一组数据
//  2. 嵌套循环遍历二维数组：
//     - 外层循环处理“行”（如年份）
//     - 内层循环处理“列”（如月份）
//  3. 二维数组的统计应用：
//     - 按行求和（每年总降水量）
//     - 按列求和（每月平均降水量）
//     - 全局求和（多年总降水量）
//  4. 符号常量的作用：
//     - 用 #define 定义 MONTHS 和 YEARS，统一管理数组大小
// 
// 总体逻辑说明：
//  1. 定义二维数组 rain，存储 5 年×12 个月的降水量数据
//  2. 嵌套循环 1：按年遍历，计算每年总降水量并累加
//  3. 嵌套循环 2：按月遍历，计算每月 5 年的平均降水量
//  4. 输出每年总降水量、多年平均降水量、每月平均降水量
// ------------------------------

#include <stdio.h>
// 一年的月份数（列数）
#define MONTHS 12  
// 统计的年数（行数）
#define YEARS 5    

int main(void)
{
    // 初始化二维数组：5 行（年）×12 列（月）的降水量数据
    const float rain[YEARS][MONTHS] = 
    {
        // 2010年数据（第1行）
        {4.3, 4.3, 4.3, 3.0, 2.0, 1.2, 0.2, 0.2, 0.4, 2.4, 3.5, 6.6},
        // 2011年数据（第2行）
        {8.5, 8.2, 1.2, 1.6, 2.4, 0.0, 5.2, 0.9, 0.3, 0.9, 1.4, 7.3},
        // 2012年数据（第3行）
        {9.1, 8.5, 6.7, 4.3, 2.1, 0.8, 0.2, 0.2, 1.1, 2.3, 6.1, 8.4},
        // 2013年数据（第4行）
        {7.2, 9.9, 8.4, 3.3, 1.2, 0.8, 0.4, 0.0, 0.6, 1.7, 4.3, 6.2},
        // 2014年数据（第5行）
        {7.6, 5.6, 3.8, 2.8, 3.8, 0.2, 0.0, 0.0, 0.0, 1.3, 2.6, 5.2}
    };

    // 循环变量：year 对应行（年），month 对应列（月）
    int year, month;  
    // 存储每年总降水量
    float subtot, total;  

    // 打印表头：年份和降水量单位
    printf(" YEAR   RAINFALL (inches)\n");

    // 初始化全局总降水量
    total = 0.0;  

    // -------------------- 嵌套循环 1：按年统计 --------------------
    for (year = 0; year < YEARS; year++)
    {
        // 初始化每年总降水量
        subtot = 0.0;  

        // 内层循环：遍历当前年的 12 个月
        for (month = 0; month < MONTHS; month++)
        {
            // 累加当前年各月降水量
            subtot += rain[year][month];  
        }

        // 输出：年份（2010+year）和当年总降水量
        printf("%5d %15.1f\n", 2010 + year, subtot);  
        // 累加到全局总降水量
        total += subtot;  
    }

    // 输出多年平均降水量（总降水量 / 年数）
    printf("\nThe yearly average is %.1f inches.\n", total / YEARS);  


    // -------------------- 嵌套循环 2：按月统计 --------------------
    printf("\nMONTHLY AVERAGES:\n");
    // 打印月份缩写（手动对齐）
    printf(" Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\n");  

    // 外层循环：遍历 12 个月
    for (month = 0; month < MONTHS; month++)
    {
        // 初始化当前月总降水量
        subtot = 0.0;  

        // 内层循环：遍历 5 年的当前月
        for (year = 0; year < YEARS; year++)
        {
            // 累加当前月 5 年的降水量
            subtot += rain[year][month];  
        }

        // 输出：当前月平均降水量（保留1位小数）
        printf("%4.1f ", subtot / YEARS);  
    }
    printf("\n");

    return 0;
}

// ------------------------------
// 测试及验证建议方案：
//  1. 基础功能测试：
//     a) 运行程序，检查输出是否包含 5 行年份数据、1 行多年平均、1 行月份平均
//     b) 核对 2010 年总降水量是否为 32.4（书中示例输出）
//     c) 核对多年平均是否为 39.4（书中示例输出）
// 
//  2. 数据修改测试：
//     a) 修改 rain 数组中某一年的某月份数据（如 2010 年 1 月改为 5.0）
//     b) 重新运行，检查对应年份总降水量、全局总降水量是否变化
// 
//  3. 易错点提醒：
//     - 二维数组下标顺序：rain[行][列]，别搞反年份和月份
//     - 浮点数精度：累加时用 float 可能有精度损失（建议用 double 更安全）
//     - 循环条件：year < YEARS 和 month < MONTHS，别写成 <=
// 
//  4. 拓展思考：
//     - 如果要统计“哪年降水量最多”，如何修改代码？（提示：记录最大值和对应年份）
//     - 如果要支持 10 年数据，只需修改 YEARS 为 10 并补充数据，体会符号常量的便利
//     - 对比“按行求和”和“按列求和”的循环结构，总结嵌套循环的通用模式
// ------------------------------