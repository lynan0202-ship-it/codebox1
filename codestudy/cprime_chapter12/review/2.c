// ------------------------------
// 题干：哪些类别的变量在它所在程序的运行期一直存在？
// 知识要点：
//  1. 全局变量（程序启动就存在，结束才销毁，外部链接） 
//  2. 静态全局变量（仅本文件可见，程序运行期存在，内部链接） 
//  3. 静态局部变量（函数内定义，程序运行期存在，无链接） 
// 总体逻辑：
//  1. 定义全局、静态全局、静态局部变量，多次调用函数修改它们 
//  2. 观察变量值在程序运行中持续变化（证明“一直存在”） 
#include <stdio.h>

int g_var = 10;          // 全局变量（外部链接，程序运行期存在）
static int sg_var = 20;  // 静态全局变量（内部链接，程序运行期存在）

void func() {
    static int sl_var = 30;  // 静态局部变量（无链接，程序运行期存在）
    g_var++;   // 每次调用都+1，值持续保留
    sg_var++;  // 每次调用都+1，值持续保留
    sl_var++;  // 每次调用都+1，值持续保留
    printf("g_var:%d, sg_var:%d, sl_var:%d\n", g_var, sg_var, sl_var);
}

int main() {
    printf("第一次调用 func：\n");
    func();  // 输出：11,21,31 
    
    printf("修改全局变量后，第二次调用 func：\n");
    g_var = 100;  // 直接修改全局变量
    func();  // 输出：101,22,32 
    
    printf("程序结束前，全局变量值：%d\n", g_var);  // 输出101（证明一直存在）
    return 0;
}

// 测试验证方案：
//  1. 怎么运行：编译运行，观察三次输出 
//  2. 预期结果：第一次11、21、31；第二次101、22、32；最后101 
//  3. 检查点：变量值跨调用、跨修改都能保留，说明运行期一直存在 
// 易错点提醒：
//  1. 静态全局和静态局部容易搞混作用域：静态全局是“整个文件可用”，静态局部是“仅函数内可用” 
// 拓展思考：
//  1. 全局变量不初始化，默认值是什么？试试定义int g_var; 看输出 
// 对比说明：
//  全局、静态全局、静态局部的共性： 
//  - 都在“全局区”存储，程序运行期一直存在 
//  差异： 
//  - 作用域：全局→整个程序，静态全局→本文件，静态局部→函数/块内 
//  - 链接属性：全局→外部链接，静态全局→内部链接，静态局部→无链接 