// ------------------------------
// 题干：哪些类别的变量可以被多个文件使用？哪些类别仅限一个文件？
// 知识要点：
//  1. 全局变量（默认extern，外部链接，可跨文件使用） 
//  2. 静态全局变量（static修饰，内部链接，仅限本文件使用） 
// 总体逻辑：
//  1. 创建两个文件：main.c（主文件）和 other.c（定义变量） 
//  2. other.c 定义全局变量 g_var（跨文件可用）和静态全局 sg_var（仅限本文件） 
//  3. main.c 用extern声明g_var并访问；尝试访问sg_var会编译报错 
// 【编译命令】：gcc main.c other.c -o test （必须同时编译两个文件）

// ------ other.c 文件内容 ------
/*
int g_var = 100;        // 全局变量（外部链接，跨文件可用）
static int sg_var = 200;// 静态全局（内部链接，仅限本文件）
*/

// ------ main.c 文件内容 ------
#include <stdio.h>

extern int g_var;  // 声明other.c里的全局变量（跨文件引用）

int main() {
    printf("访问跨文件的g_var：%d\n", g_var);  // 输出100（成功跨文件访问）
    
    // 尝试访问sg_var，会编译报错：undefined reference to `sg_var`
    // printf("尝试访问sg_var：%d\n", sg_var);
    
    return 0;
}

// 测试验证方案：
//  1. 怎么运行：
//     - 写好两个文件，执行 gcc main.c other.c -o test && ./test 
//  2. 预期结果：
//     - 注释sg_var访问行：输出“访问跨文件的g_var：100” 
//     - 取消注释：编译报错（提示sg_var未定义） 
//  3. 检查点：
//     - 能访问g_var→证明全局变量可跨文件；访问sg_var报错→证明静态全局仅限本文件 
// 易错点提醒：
//  1. 忘记同时编译两个文件，导致“g_var未定义”的链接错误 
//  2. 混淆“定义”和“声明”：other.c里是定义（int g_var=100），main.c里是声明（extern int g_var） 
// 拓展思考：
//  1. 如果多个文件都定义同名全局变量会怎样？会报“重复定义”错误，如何解决？（用static全局或命名空间） 
// 对比说明：
//  全局变量 vs 静态全局变量： 
//  - 跨文件：全局变量可以（extern声明），静态全局不行 
//  - 作用域：全局变量→整个程序，静态全局→本文件 
//  - 链接属性：外部链接 vs 内部链接 