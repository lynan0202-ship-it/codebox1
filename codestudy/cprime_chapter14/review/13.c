// ------------------------------
// 题干：声明4个函数，并初始化一个指向这些函数的指针数组。每个函数都接受两个double类型的参数，返回double类型的值。另外，用两种方法使用该数组调用带10.0和2.5实参的第2个函数。
// 知识要点：
//  1. 函数的定义（参数为double、返回值为double）
//  2. 函数指针的声明与使用
//  3. 函数指针数组的初始化与访问（下标方式、指针偏移方式）
// 总体逻辑：
//  1. 定义4个处理double的函数（加法、减法、乘法、除法）
//  2. 声明函数指针类型，用于指向“接收两个double、返回double”的函数
//  3. 初始化函数指针数组，每个元素指向一个定义好的函数
//  4. 用“数组下标”和“指针偏移”两种方式调用数组中第2个函数（下标为1），传入10.0和2.5，打印结果
#include <stdio.h>

// 定义第1个函数：两数相加
double add(double a, double b) {
    return a + b;
}

// 定义第2个函数：两数相减
double sub(double a, double b) {
    return a - b;
}

// 定义第3个函数：两数相乘
double mul(double a, double b) {
    return a * b;
}

// 定义第4个函数：两数相除（假设b不为0，简单处理）
double div(double a, double b) {
    return a / b;
}

int main() {
    // 声明函数指针类型：表示“接收两个double参数、返回double”的函数指针
    typedef double (*FuncPtr)(double, double);
    
    // 初始化函数指针数组，每个元素依次指向add、sub、mul、div
    FuncPtr funcArr[4] = {add, sub, mul, div};
    
    // 方法1：通过数组下标调用第2个函数（下标从0开始，第2个函数下标为1）
    double result1 = funcArr[1](10.0, 2.5);
    printf("方法1（下标方式）调用第2个函数的结果：%.2f\n", result1);
    
    // 方法2：通过指针偏移调用第2个函数（funcArr是数组首地址，+1指向第2个元素）
    double result2 = (*(funcArr + 1))(10.0, 2.5);
    printf("方法2（指针偏移方式）调用第2个函数的结果：%.2f\n", result2);
    
    return 0;
}

// 测试验证方案：
//  1. 怎么运行：使用C编译器（如gcc）编译代码（示例命令：gcc func_ptr_array.c -o func_ptr_array），然后运行可执行文件（示例命令：./func_ptr_array）
//  2. 预期结果：输出两行内容，第一行是“方法1（下标方式）调用第2个函数的结果：7.50”，第二行是“方法2（指针偏移方式）调用第2个函数的结果：7.50”（因为10.0 - 2.5 = 7.5）
//  3. 检查点：重点查看两次调用的结果是否均为7.5，以此验证是否正确调用了第2个函数（sub函数）
// 易错点提醒：
//  1. 函数指针数组初始化时，容易写错函数名，导致调用到错误的函数
//  2. 指针偏移方式调用时，容易遗漏解引用符号*（正确写法是*(funcArr + 1)，若写成(funcArr + 1)会因类型不匹配报错）
// 拓展思考：
//  1. 若要调用数组中第3个函数（乘法），如何修改代码？只需将下标改为2（funcArr[2](10.0, 2.5)），或指针偏移改为+2（*(funcArr + 2)(10.0, 2.5)）即可
//  2. 函数指针数组可用于“根据条件动态选择函数”的场景（如简易计算器），尝试扩展代码，让用户输入运算符，自动选择对应的函数进行计算