/* 
 * wheat.c -- 指数增长示例 
 * 程序模拟棋盘放麦粒问题：第1格放1粒，第2格放2粒，第3格放4粒...每格麦粒数是前一格的2倍，
 * 计算到第64格时的麦粒增长情况，并与世界小麦年产量对比
 */
#include <stdio.h>   // 包含标准输入输出函数（如 printf 等）
#define SQUARES 64   // 定义棋盘的方格总数，这里是国际象棋棋盘的 64 格
int main(void)
{
    // 世界小麦年产谷粒数，2E16 是科学计数法，表示 2×10^16
    const double CROP = 2E16; 
    double current, total;  // current 存储当前格的麦粒数，total 存储累计麦粒总数
    int count = 1;          // 用于计数当前是第几格，从第1格开始

    // 打印表头，分别对应“方格序号”“当前格新增麦粒数”“累计麦粒数”“占世界产量比例”
    printf("%s%13s%12s%12s\n", "square", "grains", "total", 
           "fraction of ");
    printf("%s%13s%12s%12s\n", "", "added", "grains", 
           "world total\n");

    total = current = 1.0;  // 初始化：第1格从1粒开始，累计总数也先记为1
    // 打印第1格的数据：方格序号、当前格麦粒数、累计总数、占世界产量比例
    printf("%d %13.2e %12.2e %12.2e\n", count, current, 
           total, total / CROP);

    // 循环处理从第2格到第64格（因为第1格已经单独处理过）
    while (count < SQUARES) 
    {
        count = count + 1;       // 方格序号加1，处理下一格
        current = 2.0 * current; // 下一个方格的麦粒数是当前格的2倍（指数增长）
        total = total + current; // 累计总数加上当前格新增的麦粒数

        // 打印当前格的数据：方格序号、当前格新增麦粒数、累计总数、占世界产量比例
        printf("%d %13.2e %12.2e %12.2e\n", count, current, 
               total, total / CROP);
    }

    printf("That's all.\n"); // 循环结束，打印提示信息
    return 0;
}
/*
square       grains       totalfraction of 
        added      grainsworld total

1     1.00e+000    1.00e+000    5.00e-017
2     2.00e+000    3.00e+000    1.50e-016
3     4.00e+000    7.00e+000    3.50e-016
4     8.00e+000    1.50e+001    7.50e-016
5     1.60e+001    3.10e+001    1.55e-015
6     3.20e+001    6.30e+001    3.15e-015
7     6.40e+001    1.27e+002    6.35e-015
8     1.28e+002    2.55e+002    1.27e-014
9     2.56e+002    5.11e+002    2.55e-014
10     5.12e+002    1.02e+003    5.12e-014
11     1.02e+003    2.05e+003    1.02e-013
12     2.05e+003    4.10e+003    2.05e-013
13     4.10e+003    8.19e+003    4.10e-013
14     8.19e+003    1.64e+004    8.19e-013
15     1.64e+004    3.28e+004    1.64e-012
16     3.28e+004    6.55e+004    3.28e-012
17     6.55e+004    1.31e+005    6.55e-012
18     1.31e+005    2.62e+005    1.31e-011
19     2.62e+005    5.24e+005    2.62e-011
20     5.24e+005    1.05e+006    5.24e-011
21     1.05e+006    2.10e+006    1.05e-010
22     2.10e+006    4.19e+006    2.10e-010
23     4.19e+006    8.39e+006    4.19e-010
24     8.39e+006    1.68e+007    8.39e-010
25     1.68e+007    3.36e+007    1.68e-009
26     3.36e+007    6.71e+007    3.36e-009
27     6.71e+007    1.34e+008    6.71e-009
28     1.34e+008    2.68e+008    1.34e-008
29     2.68e+008    5.37e+008    2.68e-008
30     5.37e+008    1.07e+009    5.37e-008
31     1.07e+009    2.15e+009    1.07e-007
32     2.15e+009    4.29e+009    2.15e-007
33     4.29e+009    8.59e+009    4.29e-007
34     8.59e+009    1.72e+010    8.59e-007
35     1.72e+010    3.44e+010    1.72e-006
36     3.44e+010    6.87e+010    3.44e-006
37     6.87e+010    1.37e+011    6.87e-006
38     1.37e+011    2.75e+011    1.37e-005
39     2.75e+011    5.50e+011    2.75e-005
40     5.50e+011    1.10e+012    5.50e-005
41     1.10e+012    2.20e+012    1.10e-004
42     2.20e+012    4.40e+012    2.20e-004
43     4.40e+012    8.80e+012    4.40e-004
44     8.80e+012    1.76e+013    8.80e-004
45     1.76e+013    3.52e+013    1.76e-003
46     3.52e+013    7.04e+013    3.52e-003
47     7.04e+013    1.41e+014    7.04e-003
48     1.41e+014    2.81e+014    1.41e-002
49     2.81e+014    5.63e+014    2.81e-002
50     5.63e+014    1.13e+015    5.63e-002
51     1.13e+015    2.25e+015    1.13e-001
52     2.25e+015    4.50e+015    2.25e-001
53     4.50e+015    9.01e+015    4.50e-001
54     9.01e+015    1.80e+016    9.01e-001
55     1.80e+016    3.60e+016    1.80e+000
56     3.60e+016    7.21e+016    3.60e+000
57     7.21e+016    1.44e+017    7.21e+000
58     1.44e+017    2.88e+017    1.44e+001
59     2.88e+017    5.76e+017    2.88e+001
60     5.76e+017    1.15e+018    5.76e+001
61     1.15e+018    2.31e+018    1.15e+002
62     2.31e+018    4.61e+018    2.31e+002
63     4.61e+018    9.22e+018    4.61e+002
64     9.22e+018    1.84e+019    9.22e+002
That's all.
*/