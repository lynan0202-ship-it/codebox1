
/* 
 * 代码名称：hello.c（命令行参数转数字 & 循环输出示例）
 * 知识要点总结：
 * 1. 命令行参数机制：
 *    - int argc：参数总个数（含程序名，最少为1）
 *    - char *argv[]：参数数组，argv[0]是程序名，argv[1]起是用户参数
 * 2. atoi函数（<stdlib.h>）：
 *    - 功能：将字符串转int，仅处理开头数字，非数字开头返回0（行为需注意）
 *    - 局限性：无法检测转换失败（如全非数字会返回0，需结合业务判断）
 * 3. 程序健壮性：
 *    - 校验参数数量（argc≥2）和参数合法性（转换后≥1）
 *    - 异常时提示用法，避免非法操作
 * 总体逻辑说明：
 * 1. 入口校验：若未传参数 或 参数转数字后≤0 → 提示用法并退出
 * 2. 正常流程：根据参数值循环输出固定字符串
 */

#include <stdio.h>   // 提供printf、puts等输入输出函数
#include <stdlib.h>  // 提供atoi函数（字符串转int）

int main(int argc, char *argv[])
{
    int i;            // 循环计数器
    int times = 0;    // 存储转换后的数字，初始化为0（防未初始化警告）

    // ********** 步骤1：校验参数合法性 **********
    // 情况1：未传参数（argc=1，只有程序名）
    // 情况2：参数转数字后≤0（atoi返回0或负数）
    if (argc < 2 || (times = atoi(argv[1])) < 1) {
        // %s会自动替换为argv[0]（程序名，如./hello）
        printf("Usage: %s positive-number\n", argv[0]);
        return 1;  // 非0返回值表示程序异常退出
    }

    // ********** 步骤2：循环输出内容 **********
    for (i = 0; i < times; i++) {
        puts("Hello, good looking!");  // 每次循环输出一行
    }

    return 0;  // 0返回值表示程序正常退出
}

/* 
 * 测试及验证建议方案（按步骤执行，观察输出是否符合预期）：
 * 
 * 1. 合法正数测试：
 *    - 命令：./hello 3（Windows：hello.exe 3）
 *    - 预期：连续输出3行 "Hello, good looking!"
 * 
 * 2. 无参数测试：
 *    - 命令：./hello
 *    - 预期：输出 "Usage: ./hello positive-number"（提示用法）
 * 
 * 3. 零/负数测试：
 *    - 命令：./hello 0 或 ./hello -5
 *    - 预期：同上，提示用法（因为times<1）
 * 
 * 4. 非数字参数测试：
 *    - 命令：./hello abc 或 ./hello @#$
 *    - 预期：atoi返回0 → 触发times<1 → 提示用法
 * 
 * 5. 混合字符测试（易错点！）：
 *    - 命令：./hello 42abc
 *    - 预期：atoi只解析开头"42" → times=42 → 输出42行内容
 *    - 说明：atoi遇到非数字会停止转换，只取有效前缀
 * 
 * 6. 边界值测试：
 *    - 命令：./hello 1
 *    - 预期：输出1行内容（验证最小正数）
 * 
 * 验证工具：
 * - 编译：gcc hello.c -o hello（Linux/Mac）或用IDE编译
 * - 运行：在终端/命令行执行上述测试命令，对比输出与预期
 * 
 * 易错点提醒：
 * - atoi无法区分"0"和非法转换（如"abc"都返回0），实际项目需更严谨的判断（如strtol+endptr）
 * - argv[1]在argc<2时访问会导致程序崩溃，必须先校验argc！
 */