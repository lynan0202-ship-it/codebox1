

// ------------------------------
// 题干：15. 编写一个函数，判断输入的字符串是否是纯数字。（修正原题笔误：合理逻辑为「是纯数字返回0，否则返回非0」）
// 知识要点：
//  1. 字符串遍历（下标访问，处理空字符串边界）
//  2. 字符判断（isdigit函数的使用，需包含<ctype.h>）
//  3. 函数定义与调用（字符串指针作为参数，值传递特性）
//  4. 条件判断与循环的结合使用
// 总体逻辑：
//  1. 先判断字符串是否为空（首字符是'\0'），空字符串直接返回非0
//  2. 遍历字符串每个字符，检查是否为数字（0-9）
//  3. 若遇到非数字字符，立即返回非0；遍历结束则返回0
#include <stdio.h>
#include <ctype.h>  // 提供isdigit函数，判断字符是否为数字

// 函数：判断字符串是否为纯数字
// 参数：str → 要检查的字符串
// 返回：0（纯数字） / 非0（非纯数字，包括空字符串）
int isPureNumber(char *str) {
    // 步骤1：处理空字符串（空字符串不是纯数字）
    if (str[0] == '\0') {
        return 1;  // 空字符串，返回非0
    }

    // 步骤2：遍历每个字符，检查是否为数字
    for (int i = 0; str[i] != '\0'; i++) {  // 遍历到字符串结束符
        // isdigit返回非0表示是数字，!isdigit判断「不是数字」
        if (!isdigit(str[i])) {             
            return 1;  // 发现非数字，立即返回非0
        }
    }

    return 0;  // 所有字符都是数字，返回0
}

int main() {
    // 测试用例：[输入字符串, 预期返回值（字符串转整数）]
    char *testCases[][2] = {
        {"1234", "0"},    // 纯数字 → 预期0
        {"12a3", "1"},    // 含字母 → 预期1
        {"0", "0"},       // 单个0 → 预期0
        {"-123", "1"},    // 含负号 → 预期1
        {"", "1"},        // 空字符串 → 预期1
        {"456789", "0"},  // 多位数 → 预期0
        {" 123", "1"}     // 含空格 → 预期1（额外测试）
    };
    int caseCount = sizeof(testCases) / sizeof(testCases[0]);  // 计算用例数量

    // 逐个测试用例验证
    for (int i = 0; i < caseCount; i++) {
        char *input = testCases[i][0];          // 当前测试的字符串
        int expected = atoi(testCases[i][1]);   // 预期返回值（转整数）
        int result = isPureNumber(input);       // 实际调用函数

        // 输出测试结果
        printf("输入：\"%s\" → 实际：%d，预期：%d → ", input, result, expected);
        if (result == expected) {
            printf("通过\n");
        } else {
            printf("不通过\n");
        }
    }

    return 0;
}

// 测试验证方案：
//  1. 运行方式：  
//     • 编译：gcc -o num_check num_check.c（或其他C编译器）  
//     • 执行：./num_check（Windows下为num_check.exe）  
//  2. 预期输出：  
//     所有用例均显示「通过」，例如：  
//     输入："1234" → 实际：0，预期：0 → 通过  
//     输入："" → 实际：1，预期：1 → 通过  
//  3. 检查重点：  
//     • 空字符串、含符号/字母/空格的情况是否返回1  
//     • 纯数字（含单个0、多位数）是否返回0  

// 易错点提醒：  
//  1. 忘记处理空字符串：导致空字符串返回0（错误，应为1）  
//  2. 误解isdigit返回值：isdigit返回「非0」表示是数字，若写成`if (isdigit(...))`会逻辑颠倒  
//  3. 循环条件错误：比如写成`str[i] == '\0'`，导致循环不执行，直接返回0（错误）  

// 拓展思考：  
//  1. 支持小数（如"12.34"）：  
//     • 允许一个小数点（.），且不能在开头/结尾，需添加逻辑统计小数点数量  
//  2. 支持正负号（如"+123"、"-45"）：  
//     • 允许开头是'+'或'-'，但后面必须跟数字，可在遍历前先判断首字符  
//  3. 性能优化：  
//     • 用指针遍历（`char *p = str; *p; p++`）代替下标，减少数组索引计算开销  

// 对比说明：  
//  isdigit函数 vs 手动判断（`str[i] >= '0' && str[i] <= '9'`）：  
//  • isdigit：跨平台兼容（处理非ASCII字符集），但依赖头文件  
//  • 手动判断：更直观，无需头文件，ASCII环境下功能等价  
//  场景选择：追求代码通用性用isdigit，简单场景手动判断更轻量